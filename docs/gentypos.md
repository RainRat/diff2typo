# gentypos.py

**Purpose:** Generates fake typos from a list of words. It mimics common mistakes like hitting the wrong key, skipping a letter, swapping two letters, or typing a letter twice.

## Usage

You can use this tool in two ways: processing a list of words from a file or checking specific words directly.

### 1. Process words directly (Quick Check)
Pass words as arguments to see what typos are generated. By default, results are printed to your screen.

```bash
# Generate typos for a single word
python gentypos.py hello --no-filter

# Generate typos for multiple words in JSON format
python gentypos.py apple banana orange --no-filter --format json
```

### 2. Process words from a file
Use a configuration file to process a large word list and save the results.

```bash
python gentypos.py --config gentypos.yaml
```

## Configuration (`gentypos.yaml`)

The tool uses a YAML file to control how typos are generated.

### Example Configuration

```yaml
# File Paths
input_file: "words.txt"           # Source words to process
dictionary_file: "dictionary.txt"  # Valid words (to filter out real words)
output_file: "typos.txt"          # Where to save the results

# Output Format: arrow (a -> b), csv (a,b), table (a = "b"), list (a), json, or yaml
output_format: "arrow"

# How many times to repeat the process (makes more complex typos)
repeat_modifications: 1

# Types of typos to create
typo_types:
  deletion: true       # Skipping a letter: "word" becomes "wrd"
  transposition: true  # Swapping neighbors: "word" becomes "wrod"
  replacement: true    # Hitting a nearby key: "word" becomes "wprd"
  duplication: true    # Double typing: "word" becomes "woord"

# Advanced Replacement Options
replacement_options:
  include_diagonals: true               # Include keys that are diagonal on the keyboard
  enable_adjacent_substitutions: true   # Use nearby keys
  enable_custom_substitutions: true     # Use your own custom rules (see below)

# Transposition Options
transposition_options:
  distance: 1                           # How far apart letters can be swapped

# Word Length Filters
word_length:
  min_length: 3
  max_length: 20
```

### Custom Substitutions
You can define your own replacement rules in the config file. These rules can include multi-character substrings. For example, if you often type "f" instead of "ph":

```yaml
custom_substitutions:
  ph:
    - "f"
  e:
    - "a"
    - "i"
```

### Loading Substitutions from a File
For better realism, you can load substitution patterns from an external file (JSON, CSV, or YAML). This is particularly useful for loading reports generated by `typostats.py`.

```bash
# Load patterns from a typostats JSON report
python gentypos.py my_word --substitutions stats.json --no-filter
```

Supported formats:
- **JSON:** Supports the `replacements` format from `typostats.py` or a plain key-value mapping.
- **CSV:** Supports the `correct_char,typo_char,count` format from `typostats.py`.
- **YAML:** Supports the same format as the `custom_substitutions` config section.

## How it Works

1.  **Generation:** The tool applies the selected mistake types to every word in your input.
2.  **Filtering:** It checks the new "typos" against your `dictionary_file`. If a generated typo is actually a real word (like "form" instead of "from"), it is removed. This prevents the tool from flagging correct words as typos.
3.  **Saving:** The final list is formatted and saved to your output file or printed to the screen.
